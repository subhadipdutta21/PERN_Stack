{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\PERSONAL PROJECTS\\\\REACT\\\\PERN\\\\next_frontend\\\\pages\\\\index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport { message } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { client } from '../apolloGqlClient';\nimport PostCard from '../Components/PostCard';\nimport { fetch_posts_query } from '../gqlQueries';\n\nvar Home = function Home() {\n  _s();\n\n  var _useState = useState([]),\n      posts = _useState[0],\n      setPosts = _useState[1];\n\n  var _useState2 = useState(true),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  useEffect(function () {\n    fetchPosts(); // return () => fetchPosts()\n  }, []);\n\n  var fetchPosts = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _resp$data, _resp$data2, resp;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return client.query({\n                query: fetch_posts_query,\n                fetchPolicy: 'no-cache',\n                variables: {\n                  input: null\n                }\n              });\n\n            case 3:\n              resp = _context.sent;\n              console.log(resp);\n              (resp === null || resp === void 0 ? void 0 : (_resp$data = resp.data) === null || _resp$data === void 0 ? void 0 : _resp$data.fetchPosts) ? setPosts(resp === null || resp === void 0 ? void 0 : (_resp$data2 = resp.data) === null || _resp$data2 === void 0 ? void 0 : _resp$data2.fetchPosts) : message.error('something went wrong!');\n              _context.next = 12;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n              message.error('Could not fetch posts');\n\n            case 12:\n              _context.prev = 12;\n              setLoading(false);\n              return _context.finish(12);\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8, 12, 15]]);\n    }));\n\n    return function fetchPosts() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, posts.map(function (itm, idx) {\n    return __jsx(React.Fragment, null, __jsx(PostCard, {\n      key: itm.id,\n      content: itm.body,\n      loading: loading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    }));\n  }));\n};\n\n_s(Home, \"RbKeE0iIFzYv1PT2nn3dHnXn06o=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["D:/PERSONAL PROJECTS/REACT/PERN/next_frontend/pages/index.js"],"names":["message","React","useEffect","useState","client","PostCard","fetch_posts_query","Home","posts","setPosts","loading","setLoading","fetchPosts","query","fetchPolicy","variables","input","resp","console","log","data","error","map","itm","idx","id","body"],"mappings":";;;;;;;;AAAA,SAASA,OAAT,QAAwB,MAAxB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,MAAT,QAAuB,oBAAvB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,SAASC,iBAAT,QAAkC,eAAlC;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM;AAAA;;AAAA,kBAESJ,QAAQ,CAAC,EAAD,CAFjB;AAAA,MAEVK,KAFU;AAAA,MAEHC,QAFG;;AAAA,mBAGaN,QAAQ,CAAC,IAAD,CAHrB;AAAA,MAGVO,OAHU;AAAA,MAGDC,UAHC;;AAKjBT,EAAAA,SAAS,CAAC,YAAM;AACdU,IAAAA,UAAU,GADI,CAGd;AACD,GAJQ,EAIN,EAJM,CAAT;;AAMA,MAAMA,UAAU;AAAA,wEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEIR,MAAM,CAACS,KAAP,CAAa;AAC9BA,gBAAAA,KAAK,EAAEP,iBADuB;AACJQ,gBAAAA,WAAW,EAAE,UADT;AACqBC,gBAAAA,SAAS,EAAE;AAC5DC,kBAAAA,KAAK,EAAE;AADqD;AADhC,eAAb,CAFJ;;AAAA;AAETC,cAAAA,IAFS;AAOfC,cAAAA,OAAO,CAACC,GAAR,CAAYF,IAAZ;AACA,eAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,0BAAAA,IAAI,CAAEG,IAAN,0DAAYR,UAAZ,IAAyBH,QAAQ,CAACQ,IAAD,aAACA,IAAD,sCAACA,IAAI,CAAEG,IAAP,gDAAC,YAAYR,UAAb,CAAjC,GAA4DZ,OAAO,CAACqB,KAAR,CAAc,uBAAd,CAA5D;AARe;AAAA;;AAAA;AAAA;AAAA;AAUCH,cAAAA,OAAO,CAACC,GAAR;AAAoBnB,cAAAA,OAAO,CAACqB,KAAR,CAAc,uBAAd;;AAVrB;AAAA;AAWPV,cAAAA,UAAU,CAAC,KAAD,CAAV;AAXO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAVC,UAAU;AAAA;AAAA;AAAA,KAAhB;;AAeA,SACE,4BAEIJ,KAAK,CAACc,GAAN,CAAU,UAACC,GAAD,EAAMC,GAAN;AAAA,WACR,4BACE,MAAC,QAAD;AAAU,MAAA,GAAG,EAAED,GAAG,CAACE,EAAnB;AAAuB,MAAA,OAAO,EAAEF,GAAG,CAACG,IAApC;AAA0C,MAAA,OAAO,EAAEhB,OAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADQ;AAAA,GAAV,CAFJ,CADF;AAWD,CArCD;;GAAMH,I;;KAAAA,I;AAuCN,eAAeA,IAAf","sourcesContent":["import { message } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { client } from '../apolloGqlClient';\nimport PostCard from '../Components/PostCard';\nimport { fetch_posts_query } from '../gqlQueries';\n\nconst Home = () => {\n\n  const [posts, setPosts] = useState([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetchPosts()\n\n    // return () => fetchPosts()\n  }, [])\n\n  const fetchPosts = async () => {\n    try {\n      const resp = await client.query({\n        query: fetch_posts_query, fetchPolicy: 'no-cache', variables: {\n          input: null\n        }\n      })\n      console.log(resp)\n      resp?.data?.fetchPosts ? setPosts(resp?.data?.fetchPosts) : message.error('something went wrong!')\n\n    } catch (error) { console.log(error); message.error('Could not fetch posts') }\n    finally { setLoading(false) }\n\n  }\n\n  return (\n    <>\n      {\n        posts.map((itm, idx) => (\n          <>\n            <PostCard key={itm.id} content={itm.body} loading={loading} />\n          </>\n        ))\n      }\n    </>\n  );\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}